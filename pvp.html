<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電気椅子PVP</title>
    <link rel="icon" type="image/png" href="assets/icon.png">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <header>
        <h1> 電気椅子PVP </h1>
    </header>

    <main id="main-content" class="pvp-main">
        <section id="auth-section">
            <h2>ログイン</h2>
            <form id="auth-form">
                <div class="form-group">
                    <label for="username">ユーザー名:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">パスワード:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit">参戦する</button>
            </form>
            <p id="auth-message" class="hidden"></p>
        </section>

        <section id="pvp-lobby" class="hidden">
            <h3 class="mb-5">ようこそ、<span id="authenticated-user-name"></span>様！</h3>
            <p class="text-small mb-20">ポイント: <strong id="current-score" style="color: var(--color-primary);"></strong> P</p>
            <button type="button" id="logout-button" class="action-button secondary-button w-auto mb-20">ロビーを去る</button>

            <div id="room-management" class="tool-box">
                <h4>🚪 新規対戦ルーム</h4>
                <p id="create-room-restriction-message" class="error hidden room-restriction-alert">ルーム作成は上位会員限定です。</p>
                <form id="create-room-form" class="mb-20">
                    <h5 class="mb-5">🏆 勝利ポイント設定 (P)</h5>
                    <div class="point-config-grid">
                        <div class="form-group">
                            <input type="number" id="win-points" step="0.1" value="10.0" required>
                        </div>
                    </div>
                    <button type="submit" class="action-button w-full" style="background-color: var(--color-success); border-color: #fff;">ルームを作成</button>
                    <p id="create-room-message" class="hidden"></p>
                </form>
                <form id="join-room-form">
                    <div class="form-group">
                        <label for="room-code">ルームコード (6桁):</label>
                        <input type="text" id="room-code" maxlength="6" required>
                    </div>
                    <button type="submit" class="action-button w-full" style="background-color: var(--color-info); border-color: #fff;">参加する</button>
                    <p id="join-room-message" class="hidden"></p>
                </form>
            </div>
            
            <div id="available-games-container" class="tool-box">
                <h4>🤝 参加可能なルーム一覧</h4>
                <div id="available-game-list"><p>ロード中...</p></div>
            </div>
        </section>

        <section id="game-arena" class="hidden">
            <h2 id="game-title">⚡ 対戦中 ⚡</h2>
            <div id="last-result-display" class="tool-box hidden mb-20" style="background-color: #fffaf0;">
                <p id="result-message" class="text-small font-bold" style="margin: 0;"></p>
            </div>
            <div class="flex-around mb-10">
                <div id="player-a-card" class="player-info-card flex-1"></div>
                <div id="player-b-card" class="player-info-card flex-1"></div>
            </div>
            <p id="turn-display" class="turn-indicator"></p>
            <p id="round-display" class="text-center mb-10 text-small">ラウンド: <strong id="current-round">1</strong> / 6</p>

            <div class="tool-box p-10">
                <h3 class="text-small mt-0 mb-10">椅子を選択してください</h3>
                <form id="action-form">
                    <div id="chair-container" class="chair-grid"></div>
                    <p id="chair-action-message" class="hidden"></p>
                </form>
                <div class="mt-10">
                    <button id="leave-game-button" class="action-button secondary-button">対戦を終了</button>
                </div>
            </div>
            <p id="game-message" class="hidden"></p>
        </section>
    </main>

    <footer>
        <nav class="footer-nav">
            <a href="index.html" class="input-link">ランキング</a>
            <a href="mypage.html" class="input-link">マイページ</a>
            <a href="master.html" class="input-link">マスター</a>
        </nav>
    </footer>

    <script src="assets/js/common.js"></script>
    <script src="assets/js/pvp.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
            }
        });
    </script>
</body>
</html>
